function FastClick(e,t){"use strict";function r(e,t){return function(){return e.apply(t,arguments)}}var n;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=e,this.tapDelay=t.tapDelay||200,!FastClick.notNeeded(e)){for(var i=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,a=0,s=i.length;s>a;a++)o[i[a]]=r(o[i[a]],o);deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,r,n){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,r.hijacked||r,n):i.call(e,t,r,n)},e.addEventListener=function(t,r,n){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,r.hijacked||(r.hijacked=function(e){e.propagationStopped||r(e)}),n):i.call(e,t,r,n)}),"function"==typeof e.onclick&&(n=e.onclick,e.addEventListener("click",function(e){n(e)},!1),e.onclick=null)}}"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,r){"use strict";function n(e,t){return A(new(A(function(){},{prototype:e})),t)}function i(e){return M(arguments,function(t){t!==e&&M(t,function(t,r){e.hasOwnProperty(r)||(e[r]=t)})}),e}function o(e,t){var r=[];for(var n in e.path){if(e.path[n]!==t.path[n])break;r.push(e.path[n])}return r}function a(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var r=e.length>>>0,n=Number(arguments[2])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=r);r>n;n++)if(n in e&&e[n]===t)return n;return-1}function s(e,t,r,n){var i,s=o(r,n),u={},c=[];for(var l in s)if(s[l].params&&s[l].params.length){i=s[l].params;for(var f in i)a(c,i[f])>=0||(c.push(i[f]),u[i[f]]=e[i[f]])}return A({},u,t)}function u(e,t){var r={};return M(e,function(e){var n=t[e];r[e]=null!=n?String(n):null}),null!=t["#"]&&(r["#"]=t["#"]),r}function c(e,t,r){if(!r){r=[];for(var n in e)r.push(n)}for(var i=0;i<r.length;i++){var o=r[i];if(e[o]!=t[o])return!1}return!0}function l(e,t){var r={};return M(e,function(e){r[e]=t[e]}),r}function f(e,t){var n=1,o=2,a={},s=[],u=a,c=A(e.when(a),{$$promises:a,$$values:a});this.study=function(a){function l(e,r){if(d[r]!==o){if(p.push(r),d[r]===n)throw p.splice(0,p.indexOf(r)),new Error("Cyclic dependency: "+p.join(" -> "));if(d[r]=n,O(e))h.push(r,[function(){return t.get(e)}],s);else{var i=t.annotate(e);M(i,function(e){e!==r&&a.hasOwnProperty(e)&&l(a[e],e)}),h.push(r,e,i)}p.pop(),d[r]=o}}function f(e){return F(e)&&e.then&&e.$$promises}if(!F(a))throw new Error("'invocables' must be an object");var h=[],p=[],d={};return M(a,l),a=p=d=null,function(n,o,a){function s(){--g||(w||i($,o.$$values),v.$$values=$,v.$$promises=!0,d.resolve($))}function l(e){v.$$failure=e,d.reject(e)}function p(r,i,o){function u(e){f.reject(e),l(e)}function c(){if(!T(v.$$failure))try{f.resolve(t.invoke(i,a,$)),f.promise.then(function(e){$[r]=e,s()},u)}catch(e){u(e)}}var f=e.defer(),h=0;M(o,function(e){m.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(h++,m[e].then(function(t){$[e]=t,--h||c()},u))}),h||c(),m[r]=f.promise}if(f(n)&&a===r&&(a=o,o=n,n=null),n){if(!F(n))throw new Error("'locals' must be an object")}else n=u;if(o){if(!f(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=c;var d=e.defer(),v=d.promise,m=v.$$promises={},$=A({},n),g=1+h.length/3,w=!1;if(T(o.$$failure))return l(o.$$failure),v;o.$$values?(w=i($,o.$$values),s()):(A(m,o.$$promises),o.then(s,l));for(var b=0,y=h.length;y>b;b+=3)n.hasOwnProperty(h[b])?s():p(h[b],h[b+1],h[b+2]);return v}},this.resolve=function(e,t,r,n){return this.study(e)(t,r,n)}}function h(e,t,r){this.fromConfig=function(e,t,r){return T(e.template)?this.fromString(e.template,t):T(e.templateUrl)?this.fromUrl(e.templateUrl,t):T(e.templateProvider)?this.fromProvider(e.templateProvider,t,r):null},this.fromString=function(e,t){return I(e)?e(t):e},this.fromUrl=function(r,n){return I(r)&&(r=r(n)),null==r?null:e.get(r,{cache:t}).then(function(e){return e.data})},this.fromProvider=function(e,t,n){return r.invoke(e,null,n||{params:t})}}function p(e){function t(t){if(!/^\w+(-+\w+)*$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(o[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");o[t]=!0,c.push(t)}function r(e){return e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var n,i=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,o={},a="^",s=0,u=this.segments=[],c=this.params=[];this.source=e;for(var l,f,h;(n=i.exec(e))&&(l=n[2]||n[3],f=n[4]||("*"==n[1]?".*":"[^/]*"),h=e.substring(s,n.index),!(h.indexOf("?")>=0));)a+=r(h)+"("+f+")",t(l),u.push(h),s=i.lastIndex;h=e.substring(s);var p=h.indexOf("?");if(p>=0){var d=this.sourceSearch=h.substring(p);h=h.substring(0,p),this.sourcePath=e.substring(0,s+p),M(d.substring(1).split(/[&?]/),t)}else this.sourcePath=e,this.sourceSearch="";a+=r(h)+"$",u.push(h),this.regexp=new RegExp(a),this.prefix=u[0]}function d(){this.compile=function(e){return new p(e)},this.isMatcher=function(e){return F(e)&&I(e.exec)&&I(e.format)&&I(e.concat)},this.$get=function(){return this}}function v(e){function t(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function r(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})}function n(e,t,r){if(!r)return!1;var n=e.invoke(t,t,{$match:r});return T(n)?n:!0}var i=[],o=null;this.rule=function(e){if(!I(e))throw new Error("'rule' must be a function");return i.push(e),this},this.otherwise=function(e){if(O(e)){var t=e;e=function(){return t}}else if(!I(e))throw new Error("'rule' must be a function");return o=e,this},this.when=function(i,o){var a,s=O(o);if(O(i)&&(i=e.compile(i)),!s&&!I(o)&&!j(o))throw new Error("invalid 'handler' in when()");var u={matcher:function(t,r){return s&&(a=e.compile(r),r=["$match",function(e){return a.format(e)}]),A(function(e,i){return n(e,r,t.exec(i.path(),i.search()))},{prefix:O(t.prefix)?t.prefix:""})},regex:function(e,i){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(a=i,i=["$match",function(e){return r(a,e)}]),A(function(t,r){return n(t,i,e.exec(r.path()))},{prefix:t(e)})}},c={matcher:e.isMatcher(i),regex:i instanceof RegExp};for(var l in c)if(c[l])return this.rule(u[l](i,o));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(e,t,r){function n(t){function n(t){var n=t(r,e);return n?(O(n)&&e.replace().url(n),!0):!1}if(!t||!t.defaultPrevented){var a,s=i.length;for(a=0;s>a;a++)if(n(i[a]))return;o&&n(o)}}return t.$on("$locationChangeSuccess",n),{sync:function(){n()}}}]}function m(e,i,o){function a(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function f(e,t){var n=O(e),i=n?e:e.name,o=a(i);if(o){if(!t)throw new Error("No reference point given for path '"+i+"'");for(var s=i.split("."),u=0,c=s.length,l=t;c>u;u++)if(""!==s[u]||0!==u){if("^"!==s[u])break;if(!l.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");l=l.parent}else l=t;s=s.slice(u).join("."),i=l.name+(l.name&&s?".":"")+s}var f=E[i];return!f||!n&&(n||f!==e&&f.self!==e)?r:f}function h(e,t){C[e]||(C[e]=[]),C[e].push(t)}function p(t){t=n(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var r=t.name;if(!O(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(E.hasOwnProperty(r))throw new Error("State '"+r+"'' is already defined");var i=-1!==r.indexOf(".")?r.substring(0,r.lastIndexOf(".")):O(t.parent)?t.parent:"";if(i&&!E[i])return h(i,t.self);for(var o in S)I(S[o])&&(t[o]=S[o](t,S.$delegates[o]));if(E[r]=t,!t[k]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,r){y.$current.navigable==t&&c(e,r)||y.transitionTo(t,e,{location:!1})}]),C[r])for(var a=0;a<C[r].length;a++)p(C[r][a]);return t}function d(e){return e.indexOf("*")>-1}function v(e){var t=e.split("."),r=y.$current.name.split(".");if("**"===t[0]&&(r=r.slice(r.indexOf(t[1])),r.unshift("**")),"**"===t[t.length-1]&&(r.splice(r.indexOf(t[t.length-2])+1,Number.MAX_VALUE),r.push("**")),t.length!=r.length)return!1;for(var n=0,i=t.length;i>n;n++)"*"===t[n]&&(r[n]="*");return r.join("")===t.join("")}function m(e,t){return O(e)&&!T(t)?S[e]:I(t)&&O(e)?(S[e]&&!S.$delegates[e]&&(S.$delegates[e]=S[e]),S[e]=t,this):this}function $(e,t){return F(e)?t=e:t.name=e,p(t),this}function g(e,i,a,h,p,m,$,g,C){function S(){$.url()!==D&&($.url(D),$.replace())}function P(e,r,n,o,s){var u=n?r:l(e.params,r),c={$stateParams:u};s.resolve=p.resolve(e.resolve,c,s.resolve,e);var f=[s.resolve.then(function(e){s.globals=e})];return o&&f.push(o),M(e.views,function(r,n){var i=r.resolve&&r.resolve!==e.resolve?r.resolve:{};i.$template=[function(){return a.load(n,{view:r,locals:c,params:u,notify:!1})||""}],f.push(p.resolve(i,c,s.resolve,e).then(function(o){if(I(r.controllerProvider)||j(r.controllerProvider)){var a=t.extend({},i,c);o.$$controller=h.invoke(r.controllerProvider,null,a)}else o.$$controller=r.controller;o.$$state=e,o.$$controllerAs=r.controllerAs,s[n]=o}))}),i.all(f).then(function(){return s})}var x=i.reject(new Error("transition superseded")),F=i.reject(new Error("transition prevented")),L=i.reject(new Error("transition aborted")),B=i.reject(new Error("transition failed")),D=$.url(),R=C.baseHref();return b.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:b.self,$current:b,transition:null},y.reload=function(){y.transitionTo(y.current,m,{reload:!0,inherit:!1,notify:!1})},y.go=function(e,t,r){return this.transitionTo(e,t,A({inherit:!0,relative:y.$current},r))},y.transitionTo=function(t,r,o){r=r||{},o=A({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,l=y.$current,p=y.params,d=l.path,v=f(t,o.relative);if(!T(v)){var g={to:t,toParams:r,options:o};if(a=e.$broadcast("$stateNotFound",g,l.self,p),a.defaultPrevented)return S(),L;if(a.retry){if(o.$retry)return S(),B;var E=y.transition=i.when(a.retry);return E.then(function(){return E!==y.transition?x:(g.options.$retry=!0,y.transitionTo(g.to,g.toParams,g.options))},function(){return L}),S(),E}if(t=g.to,r=g.toParams,o=g.options,v=f(t,o.relative),!T(v)){if(o.relative)throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'");throw new Error("No such state '"+t+"'")}}if(v[k])throw new Error("Cannot transition to abstract state '"+t+"'");o.inherit&&(r=s(m,r||{},y.$current,v)),t=v;var C,I,O=t.path,j=b.locals,M=[];for(C=0,I=O[C];I&&I===d[C]&&c(r,p,I.ownParams)&&!o.reload;C++,I=O[C])j=M[C]=I.locals;if(w(t,l,j,o))return t.self.reloadOnSearch!==!1&&S(),y.transition=null,i.when(y.current);if(r=u(t.params,r||{}),o.notify&&(a=e.$broadcast("$stateChangeStart",t.self,r,l.self,p),a.defaultPrevented))return S(),F;for(var R=i.when(j),V=C;V<O.length;V++,I=O[V])j=M[V]=n(j),R=P(I,r,I===t,R,j);var H=y.transition=R.then(function(){var n,i,a;if(y.transition!==H)return x;for(n=d.length-1;n>=C;n--)a=d[n],a.self.onExit&&h.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(n=C;n<O.length;n++)i=O[n],i.locals=M[n],i.self.onEnter&&h.invoke(i.self.onEnter,i.self,i.locals.globals);if(y.transition!==H)return x;y.$current=t,y.current=t.self,y.params=r,N(y.params,m),y.transition=null;var s=t.navigable;return o.location&&s&&($.url(s.url.format(s.locals.globals.$stateParams)),"replace"===o.location&&$.replace(),r["#"]&&$.hash(r["#"])),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,r,l.self,p),D=$.url(),y.current},function(n){return y.transition!==H?x:(y.transition=null,e.$broadcast("$stateChangeError",t.self,r,l.self,p,n),S(),i.reject(n))});return H},y.is=function(e,n){var i=f(e);return T(i)?y.$current!==i?!1:T(n)&&null!==n?t.equals(m,n):!0:r},y.includes=function(e,n){if(O(e)&&d(e)){if(!v(e))return!1;e=y.$current.name}var i=f(e);if(!T(i))return r;if(!T(y.$current.includes[i.name]))return!1;var o=!0;return t.forEach(n,function(e,t){T(m[t])&&m[t]===e||(o=!1)}),o},y.href=function(e,t,r){r=A({lossy:!0,inherit:!1,absolute:!1,relative:y.$current},r||{});var n=f(e,r.relative);if(!T(n))return null;t=s(m,t||{},y.$current,n);var i=n&&r.lossy?n.navigable:n,a=i&&i.url?i.url.format(u(n.params,t||{})):null;return!o.html5Mode()&&a&&(a="#"+o.hashPrefix()+a),"/"!==R&&(o.html5Mode()?(a=R.slice(0,-1)+a,t["#"]&&(a+="#"+t["#"])):r.absolute&&(a=R.slice(1)+a)),r.absolute&&a&&(a=$.protocol()+"://"+$.host()+(80==$.port()||443==$.port()?"":":"+$.port())+(!o.html5Mode()&&a?"/":"")+a),a},y.get=function(e,t){if(!T(e)){var r=[];return M(E,function(e){r.push(e.self)}),r}var n=f(e,t);return n&&n.self?n.self:null},y}function w(e,t,r,n){return e!==t||(r!==t.locals||n.reload)&&e.self.reloadOnSearch!==!1?void 0:!0}var b,y,E={},C={},k="abstract",S={parent:function(e){if(T(e.parent)&&e.parent)return f(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?f(t[1]):b},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=A({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url;if(O(t))return"^"==t.charAt(0)?i.compile(t.substring(1)):(e.parent.navigable||b).url.concat(t);if(i.isMatcher(t)||null==t)return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},params:function(e){if(!e.params)return e.url?e.url.parameters():e.parent.params;if(!j(e.params))throw new Error("Invalid params in state '"+e+"'");if(e.url)throw new Error("Both params and url specicified in state '"+e+"'");return e.params},views:function(e){var t={};return M(T(e.views)?e.views:{"":e},function(r,n){n.indexOf("@")<0&&(n+="@"+e.parent.name),t[n]=r}),t},ownParams:function(e){if(!e.parent)return e.params;var t={};M(e.params,function(e){t[e]=!0}),M(e.parent.params,function(r){if(!t[r])throw new Error("Missing required parameter '"+r+"' in state '"+e.name+"'");t[r]=!1});var r=[];return M(t,function(e,t){e&&r.push(t)}),r},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?A({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};b=p({name:"",url:"^",views:null,"abstract":!0}),b.navigable=null,this.decorator=m,this.state=$,this.$get=g,g.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"]}function $(){function e(e,t){return{load:function(r,n){var i,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=A(o,n),n.view&&(i=t.fromConfig(n.view,n.params,n.locals)),i&&n.notify&&e.$broadcast("$viewContentLoading",n),i}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function g(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,r){return e?t:function(e){r(function(){e[0].scrollIntoView()},0,!1)}}]}function w(e,r,n){function i(){return r.has?function(e){return r.has(e)?r.get(e):null}:function(e){try{return r.get(e)}catch(t){return null}}}function o(e,t){var r=function(){return{enter:function(e,t,r){t.after(e),r()},leave:function(e,t){e.remove(),t()}}};if(u)return{enter:function(e,t,r){u.enter(e,null,t,r)},leave:function(e,t){u.leave(e,t)}};if(s){var n=s&&s(t,e);return{enter:function(e,t,r){n.enter(e,null,t),r()},leave:function(e,t){n.leave(e),t()}}}return r()}var a=i(),s=a("$animator"),u=a("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(r,i,a){return function(r,i,s){function u(){l&&(l.remove(),l=null),h&&(h.$destroy(),h=null),f&&(m.leave(f,function(){l=null}),l=f,f=null)}function c(o){var s=r.$new(),c=f&&f.data("$uiViewName"),l=c&&e.$current&&e.$current.locals[c];if(o||l!==p){var $=a(s,function(e){m.enter(e,i,function(){(t.isDefined(v)&&!v||r.$eval(v))&&n(e)}),u()});p=e.$current.locals[$.data("$uiViewName")],f=$,h=s,h.$emit("$viewContentLoaded"),h.$eval(d)}}var l,f,h,p,d=s.onload||"",v=s.autoscroll,m=o(s,r);r.$on("$stateChangeSuccess",function(){c(!1)}),r.$on("$viewContentLoading",function(){c(!1)}),c(!0)}}};return c}function b(e,t,r){return{restrict:"ECA",priority:-400,compile:function(n){var i=n.html();return function(n,o,a){var s=a.uiView||a.name||"",u=o.inheritedData("$uiView");s.indexOf("@")<0&&(s=s+"@"+(u?u.state.name:"")),o.data("$uiViewName",s);var c=r.$current,l=c&&c.locals[s];if(l){o.data("$uiView",{name:s,state:l.$$state}),o.html(l.$template?l.$template:i);var f=e(o.contents());if(l.$$controller){l.$scope=n;var h=t(l.$$controller,l);l.$$controllerAs&&(n[l.$$controllerAs]=h),o.data("$ngControllerController",h),o.children().data("$ngControllerController",h)}f(n)}}}}}function y(e){var t=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?(#(.*?))?$/);if(!t||t.length<4)throw new Error("Invalid state ref '"+e+"'");return{state:t[1],paramExpr:t[3]||null,"#":t[5]}}function E(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function C(e,r){var n=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(i,o,a,s){var u=y(a.uiSref),c=null,l=E(o)||e.$current,f="FORM"===o[0].nodeName,h=f?"action":"href",p=!0,d={relative:l},v=i.$eval(a.uiSrefOpts)||{};t.forEach(n,function(e){e in v&&(d[e]=v[e])});var m=function(r){if(r&&(c=r),p){u["#"]&&(t.isObject(c)?c["#"]=u["#"]:c={"#":u["#"]});var n=e.href(u.state,c,d);return s&&s.$$setStateInfo(u.state,c),n?(o[0][h]=n,void 0):(p=!1,!1)}};u.paramExpr&&(i.$watch(u.paramExpr,function(e){e!==c&&m(e)},!0),c=i.$eval(u.paramExpr)),m(),f||o.bind("click",function(t){var n=t.which||t.button;n>1||t.ctrlKey||t.metaKey||t.shiftKey||o.attr("target")||(r(function(){e.go(u.state,c,d)}),t.preventDefault())})}}}function k(e,t,r){return{restrict:"A",controller:["$scope","$element","$attrs",function(n,i,o){function a(){e.$current.self===u&&s()?i.addClass(f):i.removeClass(f)}function s(){return!l||c(l,t)}var u,l,f;f=r(o.uiSrefActive||"",!1)(n),this.$$setStateInfo=function(t,r){u=e.get(t,E(i)),l=r,a()},n.$on("$stateChangeSuccess",a)}]}}function S(e){return function(t){return e.is(t)}}function P(e){return function(t){return e.includes(t)}}function x(e,t){function i(e){this.locals=e.locals.globals,this.params=this.locals.$stateParams}function o(){this.locals=null,this.params=null}function a(r,a){if(null!=a.redirectTo){var s,c=a.redirectTo;if(O(c))s=c;else{if(!I(c))throw new Error("Invalid 'redirectTo' in when()");s=function(e,t){return c(e,t.path(),t.search())}}t.when(r,s)}else e.state(n(a,{parent:null,name:"route:"+encodeURIComponent(r),url:r,onEnter:i,onExit:o}));return u.push(a),this}function s(e,t,n){function i(e){return""!==e.name?e:r}var o={routes:u,params:n,current:r};return t.$on("$stateChangeStart",function(e,r,n,o){t.$broadcast("$routeChangeStart",i(r),i(o))}),t.$on("$stateChangeSuccess",function(e,r,n,a){o.current=i(r),t.$broadcast("$routeChangeSuccess",i(r),i(a)),N(n,o.params)}),t.$on("$stateChangeError",function(e,r,n,o,a,s){t.$broadcast("$routeChangeError",i(r),i(o),s)}),o}var u=[];i.$inject=["$$state"],this.when=a,this.$get=s,s.$inject=["$state","$rootScope","$routeParams"]}var T=t.isDefined,I=t.isFunction,O=t.isString,F=t.isObject,j=t.isArray,M=t.forEach,A=t.extend,N=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),f.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",f),h.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",h),p.prototype.concat=function(e){return new p(this.sourcePath+e+this.sourceSearch)},p.prototype.toString=function(){return this.source},p.prototype.exec=function(e,t){var r=this.regexp.exec(e);if(!r)return null;var n,i=this.params,o=i.length,a=this.segments.length-1,s={};if(a!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(n=0;a>n;n++)s[i[n]]=r[n+1];for(;o>n;n++)s[i[n]]=t[i[n]];return s},p.prototype.parameters=function(){return this.params},p.prototype.format=function(e,t){var r=this.segments,n=this.params;if(!e)return r.join("");var i,o,a,s=r.length-1,u=n.length,c=r[0];for(i=0;s>i;i++)a=e[n[i]],null!=a&&(c+=encodeURIComponent(a)),c+=r[i+1];for(;u>i;i++)a=e[n[i]],null!=a&&(c+=(o?"&":"?")+n[i]+"="+encodeURIComponent(a),o=!0);return t||(c=c.replace("%2F","/")),c},t.module("ui.router.util").provider("$urlMatcherFactory",d),v.$inject=["$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",v),m.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",m),$.$inject=[],t.module("ui.router.state").provider("$view",$),t.module("ui.router.state").provider("$uiViewScroll",g),w.$inject=["$state","$injector","$uiViewScroll"],b.$inject=["$compile","$controller","$state"],t.module("ui.router.state").directive("uiView",w),t.module("ui.router.state").directive("uiView",b),C.$inject=["$state","$timeout"],k.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",C).directive("uiSrefActive",k),S.$inject=["$state"],P.$inject=["$state"],t.module("ui.router.state").filter("isState",S).filter("includedByState",P),x.$inject=["$stateProvider","$urlRouterProvider"],t.module("ui.router.compat").provider("$route",x).directive("ngView",w)}(window,window.angular);var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var r,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],r=document.createEvent("MouseEvents"),r.initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,e.dispatchEvent(r)},FastClick.prototype.determineEventType=function(e){"use strict";return deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){"use strict";var t;deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t,r;if(t=e.fastClickScrollParent,!t||!t.contains(e)){r=e;do{if(r.scrollHeight>r.offsetHeight){t=r,e.fastClickScrollParent=r;break}r=r.parentElement}while(r)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,r,n;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),r=e.targetTouches[0],deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!deviceIsIOS4){if(r.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=r.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=r.pageX,this.touchStartY=r.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],r=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>r||Math.abs(t.pageY-this.touchStartY)>r?!0:!1},FastClick.prototype.onTouchMove=function(e){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,r,n,i,o,a=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,r=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(o=e.changedTouches[0],a=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||a,a.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=a.tagName.toLowerCase(),"label"===n){if(t=this.findControl(a)){if(this.focus(a),deviceIsAndroid)return!1;a=t}}else if(this.needsFocus(a))return e.timeStamp-r>100||deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(a),this.sendClick(a,e),deviceIsIOS&&"select"===n||(this.targetElement=null,e.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(i=a.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(a)||(e.preventDefault(),this.sendClick(a,e)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:!e.cancelable||this.needsClick(this.targetElement)&&!this.cancelNextClick?!0:(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0},FastClick.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){"use strict";var t,r;if("undefined"==typeof window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(r>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e,t){"use strict";return new FastClick(e,t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,angular.module("firebaseHelper",["firebase"]).service("$firebaseHelper",["$firebase",function(e){var t=this,r={};return t.$ref=function(){var e=Array.prototype.slice.call(arguments);"constants"!=e[0]&&e.unshift("data");var t="Ref"+e.join("");if(r[t])return r[t];var n=new Firebase("https://ripkit.firebaseio.com/"+(e.join("/")||""));return r[t]=n,n},t.$inst=function(){var n=Array.prototype.slice.call(arguments),i="Inst"+n.join("");if(r[i])return r[i];var o=e(t.$ref.apply(this,arguments));return r[i]=o,o},t.$get=function(){var e=Array.prototype.slice.call(arguments),n="Object";e[e.length-1]===!0&&(n="Array",e.pop());var i=n+e.join("");if(r[i])return r[i];var o=t.$inst.apply(this,e)["$as"+n]();return r[i]=o,o},t.$load=function(){return t.$get.apply(this,arguments).$loaded()},t.$child=function(){var t=Array.prototype.slice.call(arguments),r=t.shift();return angular.isFunction(r.$inst)&&(r=r.$inst()),angular.isFunction(r.$ref)&&(r=r.$ref()),angular.isFunction(r.child)?e(r.child(t.join("/"))):r},t.$intersect=function(r,n){return e(Firebase.util.intersection(t.$ref(r),t.$ref(n))).$asArray()},t}]),angular.module("drumbeats",["firebase","firebaseHelper"]).controller("AppCtrl",["$scope","$rootScope","$firebaseHelper",function(e,t){t.console=console}]).controller("BeatCtrl",["$scope","$rootScope","$timeout",function(e,t){e.beat={name:"Beginner",beatsPerBar:4,beatUnit:4,barsPerMeasure:2,channels:[{name:"Bass",notes:[3,7,11,15]},{name:"HiHat",notes:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},{name:"Snare",notes:[1,5,9,13]},{name:"Ride"},{name:"Crash"},{name:"HiTom"},{name:"LoTom"},{name:"FloorTom"}]};var r=function(e){return e.beatsPerBar*e.beatUnit},n=function(t){e.spots=[];for(var n=1;n<=r(t)+1;n+=t.beatsPerBar/r(t))e.spots.push(n)};n(e.beat);var i=function(t){e.guides=[];for(var n=1;n<=r(t)+1;n+=t.beatsPerBar/r(t))e.guides.push((n-1)%t.beatsPerBar?-n:n)};i(e.beat),e.$watch("beat.beatsPerBar",function(){n(e.beat),i(e.beat)}),e.$watch("beat.beatUnit",function(){n(e.beat),i(e.beat)});var o=function(){return+new Date},a=t.$marker={position:0,$bpm:90,bpm:function(e){return e&&(a.$bpm=e),a.$bpm},$start:o(),$playing:!1,play:function(e){e&&a.bpm(e),a.$playing=!0,a.$start=o()-(a.$paused||0),requestAnimationFrame(a.$refresh)},pause:function(){a.$playing=!1,a.$paused=o()-a.$start},stop:function(){a.$start=o()+1e3,a.$playing=!1,a.$paused=0},$refresh:function(){e.$apply(function(){var t=o()-a.$start;period=6e4/a.$bpm*e.beat.beatsPerBar*e.beat.barsPerMeasure,a.position=Math.max(0,t%period/period)}),a.$playing&&requestAnimationFrame(a.$refresh)}};a.play(),e.number=function(e){return angular.isNumber(e)?e:angular.isObject(e)?e.beat:void 0},e.progress=function(t,r){return Math.max(0,Math.abs(e.number(t))-1)/(r.beatsPerBar*r.barsPerMeasure)},e.lyric=function(e,t,r){var n=(Math.abs(e)-1)%1;return 0==n?r?"note":(Math.abs(e)-1)%t.beatsPerBar+1:.25>=n?"e":n>=2/3?"a":r?"and":"&"},e.addNote=function(e,t){e.notes||(e.notes=[]),e.notes.push(t)},e.alterNote=function(e,t){var r=e.notes.indexOf(t);console.log(r,t),r>=0&&(e.notes[r]=-e.notes[r])},e.removeNote=function(e,t){e.notes||(e.notes=[]);var r=e.notes.indexOf(t);r>=0&&e.notes.splice(r,1)},e.shiftNotes=function(t){t&&(angular.forEach(e.beat.channels,function(e){angular.forEach(e.notes,function(r,n){e.notes[n]+=t})}),console.log(e.beat))}}]).filter("filterNotesByMeasure",function(){return function(e,t,r){if(!e)return e;var n=(r-1)*t.beatsPerBar*t.barsPerMeasure,i=(r-0)*t.beatsPerBar*t.barsPerMeasure;return e.filter(function(e){return e>n&&i>=e})}});